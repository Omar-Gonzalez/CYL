"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function(e){console.log(e)},Scene=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:"100%",height:"100%"};_classCallCheck(this,e),Array.isArray(t)?t.length<1?l("CYL:[Exception]Need at least one sprite to initialize a scene"):!1!==i.isInteger?(5===i&&l("CYL:Scene pixel size default of 5"),this.screen=document.getElementById("screen"),this.canvas=document.getElementById("game"),this.screenSize=n,this.pixelSize=i,this.ctx=this.canvas.getContext("2d"),this.sprites=t,this._defineCanvasDimensions()):l("CYL:[Exception]PixelSize must be a interger"):l("CYL:[Exception]Update method requires an array of sprites")}return _createClass(e,[{key:"_defineCanvasDimensions",value:function(){var e=this;this.screen.style.width=this.screenSize.width,this.screen.style.height=this.screenSize.height,this.canvas.width=this.screen.offsetWidth,this.canvas.height=this.screen.offsetHeight,window.addEventListener("resize",function(){e.canvas.width=e.screen.offsetWidth,e.canvas.height=e.screen.offsetHeight,l("CYL: Canvas resize: "+e.canvas.width)})}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.frame.width,this.frame.height)}},{key:"_renderPixel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.ctx.fillStyle=e.color,this.ctx.fillRect(e.x+t,e.y+i,this.pixelSize,this.pixelSize)}},{key:"_renderShapeSprite",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,s=e.shape[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;this._renderPixel(a,e.x,e.y)}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"update",value:function(){this.clear();var e=!0,t=!1,i=void 0;try{for(var n,r=this.sprites[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var s=n.value;this._renderShapeSprite(s)}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}},{key:"setShapeSprites",value:function(e){Array.isArray(e)?this.sprites=e:l("CYL:[Exception]Update method requires an array of sprites")}},{key:"frame",get:function(){return{width:this.canvas.width,height:this.canvas.height}}},{key:"assets",get:function(){return{spriteCount:this.sprites.length,sprites:this.sprites}}}]),e}(),ShapeSprite=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(_classCallCheck(this,e),void 0===t&&l("CYL:Warning, no name identifier for sprite"),4===n&&l("CYL:Warning, default 4 sprite size, make sure you are passing width param"),void 0!==i)if(Array.isArray(i))if(void 0!==pixelSize){this.spriteName=t,this.x=r,this.y=s,this.pixels=[];var a=0,h=0,c=0,o=!0,d=!1,u=void 0;try{for(var p,f=i[Symbol.iterator]();!(o=(p=f.next()).done);o=!0){var y=p.value;this.pixels.push({x:a,y:h,color:y}),a+=pixelSize,++c===n&&(h+=pixelSize,a=0,c=0)}}catch(e){d=!0,u=e}finally{try{!o&&f.return&&f.return()}finally{if(d)throw u}}}else l("CYL:[Exception]Please define global pixelSize value");else l("CYL:[Exception]Shape object must be an array");else l("CYL:[Exception]You need a shape to initialize a sprite")}return _createClass(e,[{key:"name",get:function(){return this.spriteName}},{key:"shape",get:function(){return this.pixels}}]),e}(),Game=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.run=function(){i.shouldUpdate&&i.activeScene.update(),window.requestAnimationFrame(i.run)},this.pause=function(){i.shouldUpdate?i.shouldUpdate=!1:i.shouldUpdate=!0},this.spriteNamed=function(e){var t=!0,n=!1,r=void 0;try{for(var s,a=i.activeScene.sprites[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;if(l.name)return l}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}},this.mouseClick=function(){document.getElementById("game").addEventListener("click",function(e){i.spriteNamed("player").x=e.clientX,i.spriteNamed("player").y=e.clientY})},this.keyPress=function(){window.addEventListener("keydown",function(e){"ArrowLeft"===e.key&&(i.spriteNamed("player").x=i.spriteNamed("player").x-30),"ArrowRight"===e.key&&(i.spriteNamed("player").x=i.spriteNamed("player").x+30),"ArrowUp"===e.key&&(i.spriteNamed("player").y=i.spriteNamed("player").y-30),"ArrowDown"===e.key&&(i.spriteNamed("player").y=i.spriteNamed("player").y+30)})},Array.isArray(t)?(0===scene&&l("CYL:Default initial scene with index 0 is being loaded"),this.scenes=t,this.active=n,this.shouldUpdate=!0,this.setActiveScene()):l("CYL:[Exception]Game requires an array of scenes")}return _createClass(e,[{key:"setActiveScene",value:function(e){void 0!==e&&(this.active=e),this.activeScene=this.scenes[this.active]}},{key:"assets",get:function(){return{scenes:this.scenes,activeScene:this.activeScene}}}]),e}(),pixelSize=5,screenSize={width:"100%",height:"100%"},sprite=new ShapeSprite("player",["transparent","white","white","transparent","white","red","white","red","white","white","white","white","white","red","red","red","transparent","white","white","transparent"],4),scene=new Scene([sprite],pixelSize,screenSize),game=new Game([scene]);game.mouseClick(),game.keyPress(),game.run();
//# sourceMappingURL=crayola.min.js.map